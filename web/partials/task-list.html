<div class="container-custom">


<!--  
	
<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Launch demo modal
</button>

-->
		<div class="alert alert-success alert-dismissible alert-deleted-success hidden" role="alert">
	  		<button type="button" class="close" data-dismiss="alert">
	  			<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
	  		</button>
	  		<strong>Task successfully deleted</strong>
	</div>

<!-- Delete Item Modal -->
	<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	        <h4 class="modal-title" id="myModalLabel">Delete</h4>
	      </div>
	      <div class="modal-body">
	        Are you sure you want to delete this task? <pre>{{toDeleteTask.description}}</pre>
	        <div ng-if="toDeleteTask.taskType==2">
	        	<em><b>Warning!</b></em> Deleting this task will also delete any subtasks
	        </div>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
	        <button type="button" class="btn btn-primary" ng-click="deleteToDeleteTask()">Delete</button>
	      </div>
	    </div>
	  </div>
	</div>
	
	

	<div class="my-category" ng-repeat="category in categories"
		ng-hover-category id="{{category.id}}">
		<div class="row">
			<div class="col-lg-2">
				<p>{{category.name}}</p>
			</div>
		</div>

		<div class="bordered-task"
			ng-repeat="task in category.taskList | orderBy:orderProp"
			ng-hover-task id="{{task.id}}" type="{{task.taskType}}">

			
			<div class="row">
				<div class="col-lg-2">
					<span class="label label-{{task.priority | priority}}">{{task.priority
						| priority}}</span>
				</div>
				
				<div class="col-lg-3">
					
					<b style="color:rgb(0,128,255);">{{task.description}}</b>
				</div>
				<div class="col-lg-4">
					<em>{{task.statusComment}}</em>
				</div>
				<div class="col-lg-2">
					<div class="progress">
						<div class="progress-bar progress-bar-success" role="progressbar"
							aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
							style="width: {{task.completionGrade -1}}px">
							<span class="sr-only">{{task.completionGrade - 1}}%
								Complete
							</span>
							<span ng-if="task.completionGrade===101">Completed</span>
						</div>
					</div>
				</div>
				<div class="col-lg-1 hidden delete-icon-task-{{task.id}}" ng-click="showDeleteModal(task)">
						<div class="glyphicon glyphicon-trash"></div>
				</div>
			</div>

			<div ng-if="task.subtaskNum" class="subtask-container">
				<span class="glyphicon glyphicon-arrow-right"></span>
				<div class="row bordered-subtask"
					ng-repeat="subtask in task.subtasks | orderBy:orderProp" ng-hover-sub-task id="{{subtask.id}}">
					<div class="col-lg-2">
						<span class="label label-{{subtask.priority | priority}}">{{subtask.priority
							| priority}}</span>
					</div>
					<div class="col-lg-3">
						<p style="color:rgb(0,128,255);">{{subtask.description}}</p>
					</div>
					<div class="col-lg-4">
						<em>{{subtask.statusComment}}</em>
					</div>
					<div class="col-lg-2">
						<div class="progress">
							<div class="progress-bar progress-bar-success" role="progressbar"
								aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
								style="width: {{subtask.completionGrade- 1}}px">
								<span class="sr-only">{{subtask.completionGrade - 1}}%
									Complete
								</span>
								<span ng-if="subtask.completionGrade===101">Completed</span>
							</div>
						</div>
					</div>
						<div class="col-lg-1 hidden delete-icon-subtask-{{subtask.id}}" ng-click="showDeleteModal(subtask)">
							<span class="glyphicon glyphicon-trash"></span>
						</div>
				</div>
			</div>

			<a href="#/tasks/create/category/{{category.id}}/parent/{{task.id}}">
				<div class="row bordered-subtask new-subtask-{{task.id}} hidden">
					<div class="col-lg-2">
						<span class="glyphicon glyphicon-plus"></span>
					</div>
					<div class="col-lg-4">
						<p>
							<em>Add a new sub-task</em>
						</p>
					</div>
				</div>
			</a>
		</div>

		<a href="#/tasks/create/category/{{category.id}}">
			<div class="row bordered-task new-task-{{category.id}} hidden">
				<div class="col-lg-2">
					<span class="glyphicon glyphicon-plus"></span>
				</div>
				<div class="col-lg-4">
					<p>
						<em>Add a new task</em>
					</p>
				</div>
			</div>
		</a>


	</div>

</div>